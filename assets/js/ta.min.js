$(document).ready(function(){var a=0;$(window).scroll(function(){if($(this).scrollTop()>50){$("#back-to-top").fadeIn()}else{$("#back-to-top").fadeOut()}var c=$(this).scrollTop();var b=$("#queryResult li").first();if(c>a){if(!b.length){$(".searchBar").addClass("fadeOut");$(".searchBar").removeClass("fadeIn")}}else{$(".searchBar").addClass("fadeIn");$(".searchBar").removeClass("fadeOut")}a=c});$("#back-to-top").click(function(){$("#back-to-top").tooltip("hide");$("body,html").animate({scrollTop:0},800);return false});$("#back-to-top").mouseover(function(){$("#back-to-top").tooltip("show")});$.ajaxSetup({cache:false});$("#query").keyup(function(){$(".searchResults").removeClass("hidden");$(".searchBar").css("height","100%");$("#queryResult").html("");searchField=$("#query").val();expression=new RegExp(searchField,"i");$.getJSON("assets/search.json",function(b){$.each(b,function(e,f){if(f.url.search(expression)!=-1||f.content.search(expression)!=-1||f.title.search(expression)!=-1){var g=f.content.search(expression)-50;var c=f.content.substring(g,g+300);if(searchField!=""){var d=c.split(expression).join("<span class='shadow bg-primary text-white rounded px-1'>"+searchField+"</span>");f.title=f.title.split(expression).join("<span class='shadow bg-primary text-white rounded px-1'>"+searchField+"</span>")}else{var d=c}$("#queryResult").append('<li class="list-group-item link-class"><img src="/assets/images/search.svg" alt="search" class="searchIcon" /><a class="pl-5" href="'+f.url+'">'+f.title+'</a><span class="text-muted"> ...'+d+'... </span><a href="'+f.url+'">read more &rArr;</a></li>')}})})});$("span.tag").each(function(){var b=Math.floor(Math.random()*4)+1;$(this).addClass("display-"+b)})});$(".ta_logo").mouseover(function(){$(this).tooltip("show")});$("a[data-mail]").on("click",function(){window.location="mailto:"+$(this).data("mail")+"@paulwillard.nz?subject=Contact from website"});$(".searchResults .close").on("click",function(){$(".searchResults").addClass("hidden");$(".searchBar").css("height","0");$("#query").val("")});$('img[rel="lightbox"]').on("click",function(){var a=$(this).attr("src").replace("thumbnails/","");$("#lightboxModalBody").html('<img src="'+a+'" alt="" class="w-100" />');$("#lightboxModal").modal("show")});(function(c){var b=c(".js-comments");c("#comment-form").submit(function(){var d=this;c(d).addClass("disabled");c("#comment-form-submit").html("Posting ...");c.ajax({type:c(this).attr("method"),url:c(this).attr("action"),data:c(this).serialize(),contentType:"application/x-www-form-urlencoded",success:function(e){c("#comment-form-submit").html("Submitted");c(".post__comments-form .js-notice").removeClass("bg-danger").addClass("bg-success");c("#comment-form fieldset").each(function(){c(this).addClass("hidden")});a("<strong>Thanks for your comment!</strong> It will show on the site once it has been approved.")},error:function(e){console.log(e);c("#comment-form-submit").html("Submit Comment");c(".post__comments-form .js-notice").removeClass("bg-success").addClass("bg-danger");a("<strong>Sorry, there was an error with your submission.</strong> Please make sure all required fields have been completed and try again.");c(d).removeClass("disabled")}});return false});function a(d){c(".post__comments-form .js-notice").removeClass("hidden");c(".post__comments-form .js-notice-text").html(d)}})(jQuery);